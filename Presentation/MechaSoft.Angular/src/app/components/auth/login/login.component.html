<div class="login-container">
  <div class="login-card">
    <!-- Logo/Header -->
    <div class="login-header">
      <svg class="logo-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/>
      </svg>
      <h1 class="title">MechaSoft</h1>
      <p class="subtitle">Sistema de Gestão de Oficina</p>
    </div>

    <app-error-message [error]="error" (onClose)="error = null"></app-error-message>

    <!-- Login Form -->
    <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" class="login-form">
      <!-- Username -->
      <div class="form-group">
        <label class="form-label">
          <svg class="label-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
          </svg>
          Username
        </label>
        <input 
          type="text" 
          formControlName="username"
          placeholder="Digite seu username"
          class="form-input"
          [class.input-error]="isFieldInvalid('username')"
          autocomplete="username"
        />
        @if (isFieldInvalid('username')) {
          <span class="error-text">{{ getFieldError('username') }}</span>
        }
      </div>

      <!-- Password -->
      <div class="form-group">
        <label class="form-label">
          <svg class="label-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/>
          </svg>
          Password
        </label>
        <input 
          type="password" 
          formControlName="password"
          placeholder="Digite sua password"
          class="form-input"
          [class.input-error]="isFieldInvalid('password')"
          autocomplete="current-password"
        />
        @if (isFieldInvalid('password')) {
          <span class="error-text">{{ getFieldError('password') }}</span>
        }
      </div>

      <!-- Submit Button -->
      <button 
        type="submit" 
        [disabled]="loginForm.invalid || isLoading"
        class="btn-submit"
      >
        @if (isLoading) {
          <svg class="spinner" fill="none" viewBox="0 0 24 24">
            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
          </svg>
          <span>A autenticar...</span>
        } @else {
          <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"/>
          </svg>
          <span>Entrar</span>
        }
      </button>
    </form>

    <!-- Footer -->
    <div class="login-footer">
      <p class="footer-text">MechaSoft v1.0 - Sistema de Gestão</p>
      <p class="footer-subtext">© 2025 MechaSoft. Todos os direitos reservados.</p>
    </div>
  </div>
</div>

